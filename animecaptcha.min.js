/*! AnimeCaptcha v1.0.0 | (c) 2023 FireStreaker2 | info: https://github.com/FireStreaker2/AnimeCaptcha */
class AnimeCaptcha{constructor(){this.finished=!1,this.selectedIndicators=[],this.selected=[],this.correctImages=[],this.indicators=["felix_argyle","hoshino_ruby","hoshino_ai","nishikigi_chisato","konjiki_no_yami","shirakami_fubuki","ookami_mio"],this.validFormats=["jpg","jpeg","png","PNG","webm","gif","GIF"],this.body=document.createElement("div"),this.body.style.backgroundColor="#cacaca",this.body.style.width="15rem",this.body.style.height="5rem",this.body.style.display="flex",this.body.style.alignItems="center",this.body.style.justifyContent="space-around",this.body.style.fontFamily="Arial",this.text=document.createElement("p"),this.text.textContent="I'm not a robot",this.image=document.createElement("img"),this.image.src="https://i1.sndcdn.com/artworks-YUSh7sS3FMSdCFOl-mOk6Pg-t500x500.jpg",this.image.style.width="3rem",this.image.style.height="3rem",this.captchaBody=document.createElement("div"),this.captchaBody.style.display="none",this.captchaBody.style.width="20rem",this.captchaBody.style.position="absolute",this.captchaBody.style.backgroundColor="#909090",this.captchaBody.style.marginLeft="11rem",this.captchaBody.style.flexDirection="column",this.titleContainer=document.createElement("div"),this.titleContainer.style.width="100%",this.titleContainer.style.height="20%",this.titleContainer.style.display="flex",this.titleContainer.style.flexDirection="row",this.titleText=document.createElement("p"),this.titleText.style.marginLeft="1rem",this.exampleImage=document.createElement("img"),this.exampleImage.style.width="5rem",this.exampleImage.style.height="5rem",this.exampleImage.style.margin="0.5rem",this.imageContainer=document.createElement("div"),this.imageContainer.style.width="100%",this.imageContainer.style.height="80%",this.imageContainer.style.display="flex",this.imageContainer.style.flexDirection="row",this.imageContainer.style.flexWrap="wrap",this.imageContainer.style.alignContent="flex-start",this.imageContainer.style.justifyContent="center",this.button=document.createElement("button"),this.button.style.width="2rem",this.button.style.height="2rem",this.button.style.cursor="pointer",this.button.addEventListener("click",(()=>{if(this.finished)alert("Captcha already finished");else{if("none"==this.captchaBody.style.display?this.captchaBody.style.display="flex":this.captchaBody.style.display="none","none"==this.captchaBody.style.display)return this.captchaBody.style.display="none",this.imageContainer.innerHTML="",this.selected=[],this.correctImages=[],void(this.selectedIndicators=[]);this.primaryIndicator=this.indicators[Math.floor(Math.random()*this.indicators.length)],this.selectedIndicators.push(this.primaryIndicator),this.title=this.primaryIndicator.replaceAll("_"," "),this.titleText.textContent=`Click all images containing ${this.title}.`,this.amount=Math.floor(6*Math.random());for(let t=0;t<this.amount+1;t++)fetch(`https://femboyfinder.firestreaker2.gq/api/${this.primaryIndicator}`).then((t=>t.json())).then((e=>{const i=e.URL.slice(2+(e.URL.lastIndexOf(".")-1>>>0));!1===this.validFormats.includes(i)?t--:t===this.amount?this.exampleImage.src=e.URL:(this.correctImages.push(e.URL),this.append(e.URL,"correct"))})).catch((t=>{this.captchaBody.style.display="none",console.error(`[ERROR] ${t}`)}));this.amountRemaining=9-this.amount,this.numberOfOtherIndicators=Math.floor(Math.random()*this.amountRemaining)+1;for(let t=0;t<this.numberOfOtherIndicators&&!(this.amountRemaining<=0);t++){for(this.incorrectAmount=Math.floor(Math.random()*this.amountRemaining)+1,this.currentIndicator=this.indicators[Math.floor(Math.random()*this.indicators.length)];this.selectedIndicators.includes(this.currentIndicator);)this.currentIndicator=this.indicators[Math.floor(Math.random()*this.indicators.length)];this.selectedIndicators.push(this.currentIndicator);for(let t=0;t<this.incorrectAmount;t++)fetch(`https://femboyfinder.firestreaker2.gq/api/${this.currentIndicator}`).then((t=>t.json())).then((e=>{const i=e.URL.slice(2+(e.URL.lastIndexOf(".")-1>>>0));this.validFormats.includes(i)?this.append(e.URL,"incorrect"):t--})).catch((t=>{this.captchaBody.style.display="none",console.error(`[ERROR] ${t}`)}));this.amountRemaining-=this.incorrectAmount}}})),this.submitButton=document.createElement("button"),this.submitButton.style.width="6rem",this.submitButton.style.height="2rem",this.submitButton.style.margin="0.5rem",this.submitButton.style.marginLeft="auto",this.submitButton.style.cursor="pointer",this.submitButton.textContent="Submit",this.submitButton.addEventListener("click",(()=>{if(this.correctSelectedUrls=this.selected.filter((t=>"correct"===t.type)).map((t=>t.image)),this.incorrectSelectedUrls=this.selected.filter((t=>"incorrect"===t.type)).map((t=>t.image)),0!==this.incorrectSelectedUrls.length)return alert("Wrong"),this.captchaBody.style.display="none",this.imageContainer.innerHTML="",this.selected=[],void(this.correctImages=[]);for(let t=1;t<=this.correctSelectedUrls.length;t++)this.correctImages.splice(this.correctImages.indexOf(this.correctSelectedUrls[t]),1);0===this.correctImages.length?(alert("Passed"),this.finished=!0,this.button.textContent="âœ“"):alert("Wrong"),this.captchaBody.style.display="none",this.imageContainer.innerHTML="",this.selected=[],this.correctImages=[],this.selectedIndicators=[]})),this.titleContainer.appendChild(this.titleText),this.titleContainer.appendChild(this.exampleImage),this.captchaBody.appendChild(this.titleContainer),this.captchaBody.appendChild(this.imageContainer),this.captchaBody.appendChild(this.submitButton),this.body.appendChild(this.button),this.body.appendChild(this.text),this.body.appendChild(this.image),this.body.appendChild(this.captchaBody)}append(t,e){const i=document.createElement("img");i.style.width="100%",i.style.height="auto",i.src=t;const s=document.createElement("a");s.style.overflow="hidden",s.style.display="flex",s.style.width="6rem",s.style.height="6rem",s.style.margin="0.3rem",s.style.cursor="pointer",s.setAttribute("waifu-clicked","false"),s.appendChild(i),"correct"===e?s.addEventListener("click",(()=>{const e={image:t,type:"correct"};"false"===s.getAttribute("waifu-clicked")?(this.selected.push(e),s.setAttribute("waifu-clicked","true"),s.style.outline="0.3rem solid red"):(this.selected.splice(this.selected.indexOf(e),1),s.setAttribute("waifu-clicked","false"),s.style.outline="none")})):s.addEventListener("click",(()=>{const e={image:t,type:"incorrect"};"false"===s.getAttribute("waifu-clicked")?(this.selected.push(e),s.setAttribute("waifu-clicked","true"),s.style.outline="0.3rem solid red"):(this.selected.splice(this.selected.indexOf(e),1),s.setAttribute("waifu-clicked","false"),s.style.outline="none")})),this.imageContainer.appendChild(s)}attach(t){this.indicators.length<2?console.error("[ERROR] Length of Indicators is less than 2"):t.appendChild(this.body)}}